version: '2.1'
services:
   snmptrap:
      image: "{{ nexus_docker_repo }}/onap/org.onap.dcaegen2.collectors.snmptrap:{{ dcae_docker_snmptrap }}"
      container_name: "static-dcaegen2-collectors-snmptrap"
      restart: "always"
      hostname: "static-dcaegen2-collectors-snmptrap"
      environment:
       - "DMAAPHOST={{ mr_ip_addr }}"
       - "CONSUL_HOST=consul"
       - "CONSUL_PORT=8500"
       - "CONFIG_BINDING_SERVICE=config_binding_service"
       - "SERVICE_NAME=static-dcaegen2-collectors-snmptrap"
       - "HOSTNAME=static-dcaegen2-collectors-snmptrap"
       - "HOSTALIASES=/etc/host.aliases"
      ports:
       - "162:6162/udp"
      labels:
       - "SERVICE_NAME=static-dcaegen2-collectors-snmptrap"
       - "SERVICE_CHECK_DOCKER_SCRIPT=/opt/app/snmptrap/bin/snmptrapd.sh status"
       - "SERVICE_CHECK_INTERVAL=300s"
       - "SERVICE_CHECK_INITIAL_STATUS=passing"
      volumes:
       - "./tls/shared:/opt/tls/shared"


   prh:
      image: "{{ nexus_docker_repo }}/onap/org.onap.dcaegen2.services.prh.prh-app-server:{{ dcae_docker_prh }}"
      container_name: "static-dcaegen2-services-prh"
      restart: "always"
      hostname: "static-dcaegen2-services-prh"
      environment:
       - "DMAAPHOST={{ mr_ip_addr }}"
       - "CONSUL_HOST=consul"
       - "CONSUL_PORT=8500"
       - "CONFIG_BINDING_SERVICE=config_binding_service"
       - "SERVICE_NAME=static-dcaegen2-services-prh"
       - "HOSTNAME=static-dcaegen2-services-prh"
       - "HOSTALIASES=/etc/host.aliases"
      ports:
       - "8082:8080"
      labels:
       - "SERVICE_8082_NAME=static-dcaegen2-services-prh"
       - "SERVICE_8082_CHECK_HTTP=/heartbeat"
       - "SERVICE_8082_CHECK_INTERVAL=15s"
       - "SERVICE_8082_CHECK_INITIAL_STATUS=passing"
      volumes:
       - "./tls/shared:/opt/tls/shared"


   hvves:
      image: "{{ nexus_docker_repo }}/onap/org.onap.dcaegen2.collectors.hv-ves.hv-collector-main:{{ dcae_docker_hvves }}"
      container_name: "static-dcaegen2-collectors-hvves"
      restart: "always"
      hostname: "static-dcaegen2-collectors-hvves"
      environment:
       - "DMAAPHOST={{ mr_ip_addr }}"
       - "CONSUL_HOST=consul"
       - "CONSUL_PORT=8500"
       - "CONFIG_BINDING_SERVICE=config_binding_service"
       - "SERVICE_NAME=static-dcaegen2-collectors-hvves"
       - "HOSTNAME=static-dcaegen2-collectors-hvves"
       - "HOSTALIASES=/etc/host.aliases"
      ports:
       - "6061:6061"
      labels:
       - "SERVICE_NAME=static-dcaegen2-collectors-hvves"
       - "SERVICE_CHECK_DOCKER_SCRIPT=/opt/app/hvves/bin/healthcheck.sh"
       - "SERVICE_CHECK_INTERVAL=15s"
       - "SERVICE_CHECK_INITIAL_STATUS=passing"
      volumes:
       - "./tls/shared:/opt/tls/shared"


   datafile:
      image: "{{ nexus_docker_repo }}/onap/org.onap.dcaegen2.collectors.datafile.datafile-app-server:{{ dcae_docker_datafile }}"
      container_name: "static-dcaegen2-collectors-datafile"
      restart: "always"
      hostname: "static-dcaegen2-collectors-datafile"
      environment:
       - "DMAAPHOST={{ mr_ip_addr }}"
       - "CONSUL_HOST=consul"
       - "CONSUL_PORT=8500"
       - "CONFIG_BINDING_SERVICE=config_binding_service"
       - "SERVICE_NAME=static-dcaegen2-collectors-datafile"
       - "HOSTNAME=static-dcaegen2-collectors-datafile"
       - "HOSTALIASES=/etc/host.aliases"
      labels:
       - "SERVICE_NAME=static-dcaegen2-collectors-datafile"
       - "SERVICE_CHECK_DOCKER_SCRIPT=/opt/app/datafile/bin/healthcheck.sh"
       - "SERVICE_CHECK_INTERVAL=15s"
       - "SERVICE_CHECK_INITIAL_STATUS=passing"
      volumes:
       - "./tls/shared:/opt/tls/shared"

